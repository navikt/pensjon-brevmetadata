== Pensjon Brevdata Mapper

Mapping av brev og vedlegg.

=== BrevdataMapper

BrevdataMapper inneholder alle brevene i pesys og er generert basert på PEN databasen med et script.
Scriptet kopierer over kolonner og tabeller som er relevant for å bygge opp et brev.

For å legge til et nytt brev må det legges til en ny mapping med følgende elementer basert på det er et doksysbrev eller et gammeltbrev(hpextream brev).

.Brev
[cols="1,1,3",]
|===
|Element |Type |Beskrivelse

|brevkodeInBrevsystem
|String
|Inneholder brevkoden som blir brukt av pesys.

|redigerbart
|boolean
|Inneholder verdi for om brevet er redigerbart eller ikke

|dekode
|String
|Inneholder en kort beskrivelse av brevet

|brevkategori
|BrevkategoriCode
|Inneholder brevkategorien

|doktype
|DokumenttypeCode
|Inneholder dokumenttypen: inngående, utgående eller notat

|sprak
|List<SprakCode>
|Inneholder liste med hvilke språk brevet støtter

|visIPselv
|Boolean
|Inneholder verdi om brevet skal vises i Pselv

|utland
|BrevUtlandCode
|Inneholder kode for når brevet skal vises: Utland, nasjonalt, alltid

|brevregeltype
|BrevregeltypeCode
|Inneholder verdi for brevregeltype

|dokumentkategori
|DokumentkategoriCode
|Inneholder dokumentkategorikode for brevet

|synligForVeileder
|Boolean
|Inneholder verdi om brevet skal være synlig for veileder

|brevkontekst
|BrevkontekstCode
|Inneholder verdi om brevkontektsen: Alltid, sak, vedtak


|===

Doksysbrev må inneholde følgende elementer i tillegg til elementene beskrevet over

.Doksysbrev
[cols="1,1,3",]
|===
|Element | Type | Beskrivelse

|dokumentmalId
|String
|Inneholder dokumentmalId som er en referanse til xsd'ene

|dokumentmalFelleselementId
|String
|Inneholder dokumentmalFelleselementId som er en refarnse til felleselement xsd'ene

|vedleggListe
|List<DoksysVedlegg>
|Inneholder en liste med doksysvedlegg som tilhører brevet.

|===

=== Hvordan legge inn nye brev

==== Teknisk

Brev er kategorisert som enten Doksysbrev eller "Gammeltbrev" (HPExstream osv.).
Alle brev er lagt inn i et Hashmap med brevkode som keyId og Brev som et objekt.

[source,java]
----
brevMap.put("OPPHOR_ENDRING_UT_BT",() ->
                new GammeltBrev("PE_UT_07_200",false, ... )

brevMap.put("AP_AVSL_ENDR", () ->
                new Doksysbrev("AP_AVSL_ENDR",true, ... )
----

For å legge inn et nytt brev må det legges inn en ny mapping i "brevMap" med informasjon om det nye brevet.

=== DoksysVedleggMapper

Slik fungerer det her